üìò PROJECT REQUEST: Build a Full ‚ÄúKDP Book Formatter‚Äù Web App in Python + Flask

I want you to create a complete, production-quality KDP Book Formatter Web App using Python + Flask.

‚úî This app must include ALL of the following features:
‚≠ê CORE FUNCTIONALITY
1Ô∏è‚É£ Upload & Processing

Upload a .docx manuscript.

Drag-and-drop uploader.

Dark mode UI.

2Ô∏è‚É£ Automatic Formatting Rules (according to KDP guidelines)
Apply KDP-standard formatting to the manuscript:

Trim sizes selectable: 6√ó9, 5√ó8, 8.5√ó11.

Page setup:

Top & Bottom: 1"

Inside: 0.85"

Outside: 0.6"

Mirrored margins when ‚ÄúPrint Book Mode‚Äù is selected.

Body text:

Font: Georgia

Size: 11 pt

Line spacing: 1.15‚Äì1.5

Paragraph spacing after: 6 pt

First-line indentation: 0.25‚Äù

Chapter formatting:

All ‚ÄúHeading 1‚Äù paragraphs are treated as chapter titles.

Insert page break before each Heading 1.

Center-align chapter titles.

Cleanup:

Remove extra spaces.

Remove tabs.

Remove manual multiple line breaks.

‚≠ê ADVANCED FEATURES
3Ô∏è‚É£ Automatic TOC Generation

Insert a Word-compatible dynamic TOC using Word‚Äôs fields.

Must render correctly when the user opens the file in Word.

4Ô∏è‚É£ Front Matter Templates

Before the manuscript content, insert:

Title Page

Big centered title text.

Author name below it.

Copyright Page

Standard copyright notice.

Dedication Page

Centered line: ‚ÄúFor someone special‚Ä¶‚Äù

Each section should start on a new page.

‚≠ê ADDITIONAL TOOLS
5Ô∏è‚É£ Inline Image DPI Checker

Inspect every image embedded in the DOCX.

Generate warnings if DPI < 300.

Display warnings after file processing.

6Ô∏è‚É£ PDF Exporter for Print Books

Provide a function to convert the resulting DOCX to a PDF:

First try using docx2pdf.

If not available, fall back to LibreOffice headless CLI.

Output file should be:
PRINT_<uuid>.pdf

‚≠ê USER INTERFACE
7Ô∏è‚É£ Drag-and-Drop File Upload UI

A drop zone that highlights on dragover.

Automatically fills file input on drop.

8Ô∏è‚É£ Dark Mode UI Styling

Use CSS to create:

Dark gray background

White text

Blue highlight colors

Styled inputs & buttons

Styled drag-and-drop box

‚≠ê TEMPLATES REQUIRED
HTML:

upload.html
Contains the uploader, form for trim size, print-mode checkbox.

CSS:

style.css
Must include:

Dark mode styles

Drag-and-drop box styling

JS:

script.js
Handles drag-and-drop logic.

‚≠ê BACKEND FILES REQUIRED
app.py

Flask web server with:

"/" for upload page

"/process" for formatting & returning results

/services folder containing:

formatter.py

Main formatting logic

Chapter detection

Page setup

TOC insertion

Style normalization

Calls frontmatter & DPI checker

frontmatter.py

Inserts title, copyright, dedication pages

dpi_checker.py

PIL-based DPI scanner

pdf_exporter.py

docx ‚Üí pdf conversion function

‚≠ê FINAL APP REQUIREMENTS

After the user submits the form:

The .docx is processed.

It is reformatted according to KDP standards.

Front matter is added.

A dynamic table of contents is created.

Images are scanned for DPI issues.

The formatted DOCX is returned for download.

PDF option is available if print mode was selected.

DPI warnings are shown on a result page.

‚≠ê OTHER REQUIREMENTS

All code must be fully functional.

The app must be runnable on Replit without modification.

The app must include a replit.nix or requirements.txt with dependencies:

flask

python-docx

Pillow

docx2pdf

pypdf or similar if needed

Ensure compatibility with Replit‚Äôs Linux environment (LibreOffice CLI fallback).

‚õ≥ Goal

Deliver a complete, professional-grade KDP Book Formatter Web App, ready for use by authors to clean up and format their manuscripts before uploading to Amazon KDP.

üìç OUTPUT FORMAT

Provide:

Full project structure

Every file with complete code

Instructions to run on Replit

END OF PROMPT